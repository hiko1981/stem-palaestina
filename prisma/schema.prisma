generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model VerifiedPhone {
  id         Int      @id @default(autoincrement())
  phoneHash  String   @unique @map("phone_hash")
  verifiedAt DateTime @default(now()) @map("verified_at")

  @@map("verified_phones")
}

model SmsVerification {
  id        Int      @id @default(autoincrement())
  phoneHash String   @map("phone_hash")
  code      String
  attempts  Int      @default(0)
  expiresAt DateTime @map("expires_at")
  used      Boolean  @default(false)
  createdAt DateTime @default(now()) @map("created_at")

  @@index([phoneHash, used])
  @@map("sms_verifications")
}

model Vote {
  id      Int      @id @default(autoincrement())
  tokenId String   @unique @map("token_id") @db.Uuid
  votedAt DateTime @default(now()) @map("voted_at")

  @@map("votes")
}

model Candidate {
  id              Int      @id @default(autoincrement())
  name            String
  party           String
  constituency    String
  pledged         Boolean  @default(false)
  publicStatement String?  @map("public_statement")
  verified        Boolean  @default(false)
  createdAt       DateTime @default(now()) @map("created_at")

  @@map("candidates")
}

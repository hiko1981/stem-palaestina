generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model VerifiedPhone {
  id         Int      @id @default(autoincrement())
  phoneHash  String   @unique @map("phone_hash")
  verifiedAt DateTime @default(now()) @map("verified_at")

  @@map("verified_phones")
}

model BallotToken {
  id        Int      @id @default(autoincrement())
  token     String   @unique @db.Uuid
  phoneHash String   @map("phone_hash")
  deviceId  String?  @map("device_id")
  used      Boolean  @default(false)
  expiresAt DateTime @map("expires_at")
  createdAt DateTime @default(now()) @map("created_at")

  @@index([phoneHash])
  @@map("ballot_tokens")
}

model Vote {
  id        Int      @id @default(autoincrement())
  phoneHash String   @unique @map("phone_hash")
  voteValue Boolean  @map("vote_value")
  votedAt   DateTime @default(now()) @map("voted_at")

  @@map("votes")
}

model Candidate {
  id              Int      @id @default(autoincrement())
  name            String
  party           String
  constituency    String
  phoneHash       String?  @map("phone_hash")
  pledged         Boolean  @default(false)
  publicStatement String?  @map("public_statement")
  verified        Boolean  @default(false)
  createdAt       DateTime @default(now()) @map("created_at")

  @@map("candidates")
}
